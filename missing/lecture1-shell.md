# Shell

- `windows:` `powershell`; `linux`: `bash and so on` 

  - 可自定义风格
  - arguments
    - 空格分隔参数
    - `""` 表示1个有空格的参数
  - 通过环境变量找到要调用的程序
    - 给`shell`命令，`shell`从环境变量中找该命令要调用的程序
  - 路径
    - `linux`：地址从根目录开始`/.../`
    - `windows`：地址从硬盘开始`C:\...\`

# Linux指令

## 基础概念

- `;`：将几个命令连在一起输入`shell`，`shell`将其连接在一起执行
  - `ls -l; tail -n1`
- `a | b`：将2个命令连在一起执行
  - `|`其实是管道，将上一个命令的输出传给下一个命令
- `a || b`：执行命令a，若命令a执行错误，则执行命令b
- `a && b`：执行命令a，若命令a执行错误，则不会执行命令b
- `linux: root user`和`windows: administrator`：超级用户
  - `sudo`：do as super user
    - `$`代表非超级用户
  - `sudo su`：进入超级用户命令行
  - `exit`：退出超级用户
- `man`：查看命令格式
  - `man ls`：查看`ls`命令使用的格式

## 文件系统

### 文件路径

- `pwd`：返回当前文件夹
- `ls`：列出文件夹中的所有文件
  - `ls [dir]`：列出路径为dir的文件中的文件
    - `ls ..`：列出上一文件夹中的文件
  - 常用参数
    - `ls -a`：显示当前文件夹下的所有文件和文件夹（包括隐藏文件）
    - `ls -l`：显示当前文件夹下不隐藏文件的详细信息（访问权限）
    - `ls -al`：显示当前文件夹下全有文件的详细信息（隐藏+不隐藏）
    - `ls -lh`：文件所占存储空间以kB or MB记
    - `ls -t`：按照文件建立时间先后顺序列出
    - `ls -r`：反序列出，如`ls- rt`是由新到旧地列出
    - `ls -A`：同`-a`，但不列出`.`和`..`
    - `ls -R`：列出所有子文件夹中的文件
  - `ls`符合正则匹配规则
    - `ls *.sh`：查看当前文件夹下所有.sh文件
    - `ls xxx?`：？表省略
    - `ls image.{png, jpg}`：{}表示多个取值
  - `ls /sys`：访问内核态参数（以文件系统的形式）
  - `ls --help`：查看`ls`命令形式
- `cd`：进入文件夹
  - `.`下一级；`..`上一级
    - `cd ~`：进入默认目录（通常是user文件夹下）
    - `cd /`：进入根目录
  - `cd -`：进入上一个访问的文件夹
- `mkdir`：创建文件夹
  - `mkdir "my dir"`
- `rmdir [dir]`：删除路径为dir的文件夹

### 文件操作

- `mv`：重命名&移动文件
  - `mv addr1/file1 addr2/file2`

- `cp`：拷贝文件

  - `cd addr1/file1 addr2/file2`
- `rm`：删除文件
  - `rm addr/file`
- `cat`：在命令行显示文件
  - `cat hello.txt`：在命令行显示`hello.txt`文件
  - `ctrl+l`：清空命令行
- `touch`：修改文件属性
  - 若文件不存在，则`touch [file]`会创建1个空文件
  - `touch {foo, bar}-{a..j}`：从{foo, bar}和{a, b, c, ..., j}中各取1个元素组合成文件名，并创建之

### 特殊输入输出

- `echo`：输入啥，显示啥
  - `echo ... > file`可写入文件
- `<`：给出输入地址（输入流的地址）；`>`：给出输出地址（输出流的地址，直接覆盖）；`>>`：给出输出地址（在文件后追加）
  - `echo hello > hello.txt`：将`echo`指令返回值写入该文件夹下的`hello.txt`文件中
  - `cat < hello1.txt > hello2.txt`：将`hello1.txt`拷贝为`hello2.txt`
  - `1>`只写正确输出，`2>`只写错误输出，`&>`正确输出和错误输出都写入
- `tee`：既将数据写入文件，又将数据打印在命令行
  - `echo 1 | sudo tee brighness`：将1写入brightness文件同时在命令行显示1
  - `cat ~/.ssh/id_xxx.pub | ssh jab@IP地址 tee ~/.ssh/authorized_keys`：将SSH公钥上传至服务器
- 解析时**倒叙解析**：
  - `cat < hi > hi`会使得hi文件被清空；`cat < hi >> hi`会使得hi文件不断被复制和追加
  - `> file 2>&1`：标准错误输出放到标准正确输出中，标准正常输出放到file中
    - `&`表示`1`是标准错误输出，而不是文件

## 查找

- `grep`：从文件/命令行输出中查找关键字
  - 一般结构：`grep [参数] “模式” [文件名]`，`"模式"`可使用正则匹配，也可直接写关键词
    - `grep [关键词] [文件名]`：从文件中查询关键词，成功则返回关键词所在行
    - `grep [关键词]`：从命令行输出中查询关键词，成功则返回关键词所在行
  - 参数
    - `-E`：使用新正则匹配表达式
    - `-i`：忽略大小写
    - `-v`：只打印没有匹配的
    - 使用多个参数时可取消`-`，将参数合在一起
  - `grep`符合正则匹配
    - grep的`"模式"`中直接输入正则匹配表达式，不必像`sed`还需要变形
    - `grep`中使用元字符时需要加`\`
  - 类似的命令有：`riggrep`（更多功能）
- `find`：查找文件路径&排序
  - `find [顶层地址] -name [名字] -type [类型]`
    - 例：`find . -name src -type d`：以当前文件夹为顶层文件，查找名字为src的文件夹
    - 类型：d为文件夹；f为文件
  - `find xxx -exec [指令]`：查找到一些文件后可对这些文件执行指令
- `locate [关键词]`：查找路径有关键词的文件
- `uniq`：查找重复行
  - `uniq`从文件/命令行中读取字符串，往往跟在读取命令后
  - `uniq duplicat.txt`：删除文件中连续且重复的行，在命令行中输出结果
    - 默认只删除连续且重复的；不改变原文件；可使用`>`将结果输入到原文件
  - `sort duplicate.txt | uniq`：删除所有重复行
    - 先按行排序，再从排序结果中输出所有重复行
  - `uniq -u`：显示只出现1次的行
    - `sort duplicate.txt | uniq -u`：显示文件中只出现1次的行
  - `uniq -d`：显示出现多次的行
  - `uniq -c`：显示出现

## 排序

- `sort`：对命令行输出排序，再替代之输出到命令行中
  - `cat log.txt | sort`：读入`log.txt`，再按行排序，输出排序后结果
  - `sort -n `：按照数值大小升序

## 其它常用功能

- `cmp`：逐字节比较2个文件
  - `cmp 文件1 文件2`
  - 返回结果保存在 $? 寄存器中

- `wc`：统计命令行输出字数等（常与其它命令连接起来使用）
  - `wc -c`：统计字节数；`wc -l`：统计行数；`wc -w`：统计字数 
- `date`：输出当前时刻
- `history`：展示所有输入过的命令
  - `history [num]`：展示前num条记录
  - `history [num] | grep [key_word]`：展示前num条记录中含有key_word的指令
- `bc`：浮点计算器
  - 命令行输入`bc`进入计算器，直接可输入计算指令
  - **内置变量**：`scale`是小数点后维数，`ibase`是输入的进制，`obase`是输出的进制，`last`是最近打印的数字
  - 也可通过`echo`传给`bc`的参数：`echo "scale=3; 10/3" | bc`

# 常用小程序

- `tldr`：查看帮助
- `tree`：显示文件夹结构











